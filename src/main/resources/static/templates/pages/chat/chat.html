<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">POPIN</title>

    <!-- 공통 레이아웃 CSS -->
    <link rel="stylesheet" href="/css/layout.css">

    <!-- 페이지별 CSS -->
    <link rel="stylesheet" href="/css/chat/chat.css">
</head>
<body>
<div class="mobile-container">
    <!-- 헤더 영역 -->
    <div id="header-container">
        <!-- JavaScript로 동적 로드 -->
    </div>

    <!-- 메인 콘텐츠 영역 -->
    <main class="main-content" id="main-content">

        <!-- 채팅 화면 -->
        <section class="chat-container">
            <header class="chat-header">
                <button id="btn-back" class="btn-back">←</button>
                <h3>예약 채팅</h3>
            </header>

            <div class="chat-messages" id="chat-messages">
                <!-- JS에서 메시지 append -->
            </div>

            <footer class="chat-input">
                <input type="text" id="chat-input" placeholder="메시지를 입력하세요">
                <button id="btn-send">전송</button>
            </footer>
        </section>

    </main>

    <!-- 푸터 영역 -->
    <div id="footer-container">
        <!-- JavaScript로 동적 로드 -->
    </div>
</div>

<!-- 공통 스크립트 -->
<script src="/js/templateLoader.js"></script>
<script src="/js/api.js"></script>
<script src="/js/layout.js"></script>
<script src="/js/popup-list.js"></script>
<script src="/js/popup-search.js"></script>
<script src="/js/map.js"></script>
<script src="/js/pages.js"></script>

<!-- WebSocket 라이브러리 -->
<script src="https://cdn.jsdelivr.net/npm/sockjs-client/dist/sockjs.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/stompjs/lib/stomp.min.js"></script>

<!-- 페이지별 스크립트 -->
<script src="/js/chat/chat.js"></script>

<!-- 애플리케이션 초기화 -->
<script>
    document.addEventListener('DOMContentLoaded', async function() {
        await loadComponents();
        initializeLayout();
        if (window.ChatPage) {
            ChatPage.init();
        }
    });
</script>
</body>
</html>
